<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Manual Entry Form - BillSplitter+</title>
  <style>
    .member-block {
      border: 1px solid #ccc;
      padding: 12px;
      margin-bottom: 20px;
    }
    .item-entry {
      margin-bottom: 8px;
    }
  </style>
</head>
<body>
  <h2>✍️ Manually Add Bill Details for Group: {{ group.name }}</h2>

  <form action="{{ url_for('main.manual_form', group_id=group.id) }}" method="post">
    {{ csrf_token() }}

    {% for i in range(group.num_members) %}
      <div class="member-block" id="member-block-{{ i }}">
        <label>Member {{ i + 1 }} Name:</label>
        <input type="text" name="members[{{ i }}][name]" required><br><br>

        <div id="items-{{ i }}">
          <!-- Item entries will be appended here -->
        </div>

        <button type="button" onclick="addItem({{ i }})">➕ Add Dish</button>
      </div>
    {% endfor %}

    <button type="submit">Submit Bill</button>
  </form>

  <script>
    function addItem(memberIndex) {
      const container = document.getElementById('items-' + memberIndex);

      const itemIndex = container.children.length;

      const html = `
        <div class="item-entry">
          <label>Item Name:</label>
          <input type="text" name="members[${memberIndex}][items][${itemIndex}][name]" required>

          <label>Price:</label>
          <input type="number" step="0.01" name="members[${memberIndex}][items][${itemIndex}][price]" required>

          <label>Share (e.g. 1, 0.5):</label>
          <input type="number" step="0.01" name="members[${memberIndex}][items][${itemIndex}][share]" required>
        </div>
      `;

      container.insertAdjacentHTML('beforeend', html);
    }
  </script>
</body>
</html>
